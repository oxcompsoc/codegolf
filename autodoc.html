<!DOCTYPE html>
<html>
    <head>
        <title>Auto documenter for GolfScript</title>
    </head>
    <body>
        <textarea id="input">
;'2706 410'
~{.@\%.}do; </textarea>
        <pre id="output"></pre>
        <script>
function onchange() {
    var inputArea = document.getElementById("input");
    var toks = tokens(inputArea.value);
    showDocs(toks);
}

function tokens(src) {
    return [";", "'2706 410'", "~", "{", ".", "@", "\\", "%", ".", "}", "do",
    ";"];
}

function showDocs(toks) {
    var documentation = {
        ";" : "Pop and discard the top item from stack",
        "~" : "Bitwise, dump, or eval",
        "!" : "Logical not",
        "{" : "Start code block",
        "}" : "End code block",
        "." : "Duplicate the top item on the stack",
        "@" : "Rotate the top item with the third down",
        "/" : "div, split, split in groups of size, unfold, each",
        "%" : "mod, map, every ith element, clean split",
        "do": "Pops the top value from the stack and if it is not zero repeat the preceding block"
    };
    var output = "";
    for (var i = 0; i < toks.length; i++) {
        var tok = toks[i];
        if (tok in documentation) {
            output += tok + "\t\t" + documentation[tok] + "\n";
        }
        else if (tok[0] == '\'') {
            output += tok + "\t\tRaw string\n";
        }
        else if (tok[0] == '"') {
            output += tok + "\t\tString\n";
        }
        else {
            output += tok + "\n";
        }
    }
    document.getElementById("output").innerText = output;
}

var inputArea = document.getElementById("input");
inputArea.addEventListener("input", onchange, false);

onchange();
        </script>
    </body>
</html>
